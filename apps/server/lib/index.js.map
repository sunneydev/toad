{"version":3,"sources":["../src/config.ts","../src/index.ts"],"sourcesContent":["import { FileSystemCache } from \"file-system-cache\";\nimport { AuthProps } from \"shared/types\";\n\nconst cache = new FileSystemCache({\n  basePath: \"~/.toad/config\",\n  ns: \"toad-server\",\n});\n\nexport const config = cache.getSync(\"config\") as AuthProps | undefined;\n\nexport const getAuth = () => cache.getSync(\"auth\");\n\nexport const setAuth = (auth: any) => cache.setSync(\"auth\", auth);\n\nexport const getSecret = () => cache.getSync(\"secret\");\n\nexport const setSecret = (secret: any) => cache.setSync(\"secret\", secret);\n\nexport const getDomain = () => cache.getSync(\"domain\");\n\nexport const setDomain = (domain: any) => cache.setSync(\"domain\", domain);\n","// import express from \"express\";\n// import { Octokit } from \"@octokit/core\";\n// import { AuthProps } from \"shared/types\";\nimport { config } from \"./config.js\";\n\nconsole.log(config);\n\n// const app = express();\n// const octokit = new Octokit();\n\n// app.use(express.json());\n\n// app.post(\"/auth\", (req, res) => {\n//   const auth: Partial<AuthProps> = req.body;\n\n//   if (!auth.token || !auth.domain || !auth.secret) {\n//     res.status(400).send(\"Missing auth props\");\n//     return;\n//   }\n\n//   if (!auth) {\n//     res.status(400).send(\"Missing auth\");\n//     return;\n//   }\n// });\n\n// app.post(\"/watch\", (req, res) => {\n//   const { repository } = req.body;\n\n//   if (!repository) {\n//     res.status(400).send(\"Missing repository\");\n//     return;\n//   }\n\n//   req.octokit.request(\"POST /repos/{owner}/{repo}/hooks\", {\n//     owner: repository.owner.login,\n//     repo: repository.name,\n//     active: true,\n//     events: [\"push\"],\n//     config: {\n//       url: ``,\n//       content_type: \"json\",\n//       insecure_ssl: \"0\",\n//     },\n//   });\n\n//   res.send(\"Hello World!\");\n// });\n"],"mappings":"aAAA,IAAAA,EAAgC,6BAG1BC,EAAQ,IAAI,kBAAgB,CAChC,SAAU,iBACV,GAAI,aACN,CAAC,EAEYC,EAASD,EAAM,QAAQ,QAAQ,ECH5C,QAAQ,IAAIE,CAAM","names":["import_file_system_cache","cache","config","config"]}